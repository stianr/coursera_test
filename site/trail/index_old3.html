<!DOCTYPE html>
<html>
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Mouse+Memoirs&display=swap" rel="stylesheet"> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
  <title>Trail-Making Demo</title>
	  <style>
      * { padding: 0; margin: 0; }
      .overlays {position: absolute;}
#container {
   z-index: 3;
   position: relative;
  text-align: center;
  color: black;
  top: 0;
  animation-name: example;
  animation-duration: 1s;
  transform: scale(1);
  visibility: hidden;
  animation-play-state: paused;
}

@keyframes example {
 0% {
    transform: scale(0.5);
  }
  100% {
    transform: scale(1);
  }
}

#centered {
   font-family: 'Mouse Memoirs', sans-serif;
     font-size: 36px;
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translate(-50%, -50%);
}


#balloon-container {
  height: 100vh;
  padding: 1em;
  box-sizing: border-box;
  display: flex;
  flex-wrap: wrap;
  overflow: hidden;
  visibility:  hidden;
}

.balloon {
  height: 125px;
  width: 105px;
  border-radius: 75% 75% 70% 70%;
  position: relative;
}

.balloon:before {
  content: "";
  height: 75px;
  width: 1px;
  padding: 1px;
  background-color: #FDFD96;
  display: block;
  position: absolute;
  top: 125px;
  left: 0;
  right: 0;
  margin: auto;
}

.balloon:after {
    content: "â–²";
    text-align: center;
    display: block;
    position: absolute;
    color: inherit;
    top: 120px;
    left: 0;
    right: 0;
    margin: auto;
}

@keyframes float {
  from {transform: translateY(100vh);
  opacity: 1;
visibility:  visible;}
  to {transform: translateY(-300vh);
  opacity: 1;
visibility:  visible;}
}
</style>
</head>
<body>
    <img id="background_png" src="jungle.png" width="500" />

<div id="balloon-container">
<div id="container" style="width:100%;">
  <img src="feedback.png" alt="Feedback" >
  <div id="centered">Well done!<br/>You did it in 7 seconds with 8 clicks!
  </div>
</div>
</div>

<script>
  var clickcount=0;
  var starttime=new Date().getTime();
  var totaltime=0;
  var winit=window.innerWidth;
  var hinit=window.innerHeight;
  var nextclick="1a";
  var hoffset=0;
  var voffset=0;
  if(winit/2560 > hinit/1440) {
  background_png.height=0.99*window.innerHeight;
  background_png.width=0.99*(window.innerHeight/1440)*2560;


  } else {
  background_png.width=0.99*window.innerWidth;
  background_png.height=0.99*(window.innerWidth/2560)*1440;
  }
  hoffset=(window.innerWidth-background_png.width)/2;
  voffset=(window.innerHeight-background_png.height)/2;
  var feedback_voffset=(window.innerHeight-412)/2;
  container.style.top=feedback_voffset+"px";
  background_png.setAttribute('class', 'overlays');
  console.log(hoffset);
  background_png.style.left=hoffset+"px";
  background_png.style.top=voffset+"px";
  var wd=background_png.width;

        
        var i_1a = document.createElement("img");
        i_1a.setAttribute('src', '1_a_ns.png');
        i_1a.setAttribute('class', 'overlays');
        i_1a.width=window.wd/15;
        i_1a.style.left = 0.1*wd+hoffset+ "px";
        i_1a.style.top = 0.1*wd +voffset+ "px";
        document.body.appendChild(i_1a);
        i_1a.onclick=function() {
          checkUpdate("1a");
        }

        var i_1b = document.createElement("img");
        i_1b.setAttribute('src', '1_b_ns.png');
        i_1b.setAttribute('class', 'overlays');
        i_1b.width=window.wd/15;
        i_1b.style.left = 0.3*wd +hoffset+ "px";
        i_1b.style.top = 0.2*wd +voffset+ "px";
        document.body.appendChild(i_1b);
        i_1b.onclick=function() {
          checkUpdate("1b");
        }

        var i_2a = document.createElement("img");
        i_2a.setAttribute('src', '2_a_ns.png');
        i_2a.setAttribute('class', 'overlays');
        i_2a.width=window.wd/15;
        i_2a.style.left = 0.5*wd+hoffset+ "px";
        i_2a.style.top = 0.18*wd +voffset+ "px";
        document.body.appendChild(i_2a);
        i_2a.onclick=function() {
          checkUpdate("2a");
        }

         var i_2b = document.createElement("img");
        i_2b.setAttribute('src', '2_b_ns.png');
        i_2b.setAttribute('class', 'overlays');
        i_2b.width=window.wd/15;
        i_2b.style.left = 0.8*wd+ hoffset+"px";
        i_2b.style.top = 0.05*wd + voffset+"px";
        document.body.appendChild(i_2b);
        i_2b.onclick=function() {
          checkUpdate("2b");
        }

        var i_3a = document.createElement("img");
        i_3a.setAttribute('src', '3_a_ns.png');
        i_3a.setAttribute('class', 'overlays');
        i_3a.width=window.wd/15;
        i_3a.style.left = 0.85*wd+hoffset+ "px";
        i_3a.style.top = 0.35*wd +voffset+ "px";
        document.body.appendChild(i_3a);
        i_3a.onclick=function() {
          checkUpdate("3a");
        }

        var i_3b = document.createElement("img");
        i_3b.setAttribute('src', '3_b_ns.png');
        i_3b.setAttribute('class', 'overlays');
        i_3b.width=window.wd/15;
        i_3b.style.left = 0.1*wd+hoffset+ "px";
        i_3b.style.top = 0.4*wd +voffset+ "px";
        document.body.appendChild(i_3b);
        i_3b.onclick=function() {
          checkUpdate("3b");
        }

        var i_4a = document.createElement("img");
        i_4a.setAttribute('src', '4_a_ns.png');
        i_4a.setAttribute('class', 'overlays');
        i_4a.width=window.wd/15;
        i_4a.style.left = 0.55*wd+ hoffset+"px";
        i_4a.style.top = 0.32*wd +voffset+ "px";
        document.body.appendChild(i_4a);
        i_4a.onclick=function() {
          checkUpdate("4a");
        }

        var i_4b = document.createElement("img");
        i_4b.setAttribute('src', '4_b_ns.png');
        i_4b.setAttribute('class', 'overlays');
        i_4b.width=window.wd/15;
        i_4b.style.left = 0.22*wd+hoffset+ "px";
        i_4b.style.top = 0.27*wd +voffset+ "px";
        document.body.appendChild(i_4b);
        i_4b.onclick=function() {
          checkUpdate("4b");
        }


        var l_1= document.createElement("img");
        l_1.setAttribute('src', 'line_1.png');
        l_1.setAttribute('class', 'overlays');
        l_1.width=window.wd/6.7;
        l_1.style.left = 0.16*wd +hoffset+ "px";
        l_1.style.top = 0.14*wd +voffset+ "px";
        document.body.appendChild(l_1);
        l_1.style.visibility="hidden";


        var l_2= document.createElement("img");
        l_2.setAttribute('src', 'line_2.png');
        l_2.setAttribute('class', 'overlays');
        l_2.width=window.wd/7;
        l_2.style.left = 0.36*wd +hoffset+ "px";
        l_2.style.top = 0.22*wd +voffset+ "px";
        document.body.appendChild(l_2);
        l_2.style.visibility="hidden";


        var l_3= document.createElement("img");
        l_3.setAttribute('src', 'line_3.png');
        l_3.setAttribute('class', 'overlays');
        l_3.width=window.wd/4.1;
        l_3.style.left = 0.56*wd +hoffset+ "px";
        l_3.style.top = 0.095*wd +voffset+ "px";
        document.body.appendChild(l_3);
        l_3.style.visibility="hidden";

        var l_4= document.createElement("img");
        l_4.setAttribute('src', 'line_4.png');
        l_4.setAttribute('class', 'overlays');
        l_4.width=window.wd/27;
        l_4.style.left = 0.837*wd +hoffset+ "px";
        l_4.style.top = 0.115*wd +voffset+ "px";
        document.body.appendChild(l_4);
        l_4.style.visibility="hidden";

        var l_5= document.createElement("img");
        l_5.setAttribute('src', 'line_5.png');
        l_5.setAttribute('class', 'overlays');
        l_5.width=window.wd/1.42;
        l_5.style.left = 0.16*wd +hoffset+ "px";
        l_5.style.top = 0.4*wd +voffset+ "px";
        document.body.appendChild(l_5);
        l_5.style.visibility="hidden";

        var l_6= document.createElement("img");
        l_6.setAttribute('src', 'line_6.png');
        l_6.setAttribute('class', 'overlays');
        l_6.width=window.wd/2.5;
        l_6.style.left = 0.152*wd +hoffset+ "px";
        l_6.style.top = 0.335*wd +voffset+ "px";
        document.body.appendChild(l_6);
        l_6.style.visibility="hidden";

        var l_7= document.createElement("img");
        l_7.setAttribute('src', 'line_7.png');
        l_7.setAttribute('class', 'overlays');
        l_7.width=window.wd/3.5;
        l_7.style.left = 0.28*wd +hoffset+ "px";
        l_7.style.top = 0.318*wd +voffset+ "px";
        document.body.appendChild(l_7);
        l_7.style.visibility="hidden";

function checkUpdate(clicked){
    console.log(clicked);
    clickcount++;
if(clicked=="1a"){
  if(nextclick=="1a"){
   starttime=new Date().getTime();
   i_1a.setAttribute('src', '1_a_s.png');
   nextclick="1b";
  }
 }
if(clicked=="1b"){
  if(nextclick=="1b"){
  i_1b.setAttribute('src', '1_b_s.png');
  l_1.style.visibility="visible";
  nextclick="2a";
  }
 }
if(clicked=="2a"){
  if(nextclick=="2a"){
  i_2a.setAttribute('src', '2_a_s.png');
  l_2.style.visibility="visible";
  nextclick="2b";
  }
 }

if(clicked=="2b"){
  if(nextclick=="2b"){
  i_2b.setAttribute('src', '2_b_s.png');
  l_3.style.visibility="visible";
  nextclick="3a";
  }
 }

if(clicked=="3a"){
  if(nextclick=="3a"){
  i_3a.setAttribute('src', '3_a_s.png');
  l_4.style.visibility="visible";
  nextclick="3b";
  }
 }

 if(clicked=="3b"){

  if(nextclick=="3b"){
  i_3b.setAttribute('src', '3_b_s.png');
  l_5.style.visibility="visible";
  nextclick="4a";
  }
 }

 if(clicked=="4a"){
  if(nextclick=="4a"){
  i_4a.setAttribute('src', '4_a_s.png');
  l_6.style.visibility="visible";
  nextclick="4b";
  }
 }

 if(clicked=="4b"){
  if(nextclick=="4b"){
  i_4b.setAttribute('src', '4_b_s.png');
  l_7.style.visibility="visible";
  totaltime=new Date().getTime();
    console.log(totaltime);
    console.log(starttime);
  totaltime=totaltime-starttime;
  totaltime=Math.round(totaltime/100)/10;
  console.log(totaltime);
  document.getElementById('container').style.visibility="visible";
  document.getElementById('container').style.animationPlayState="running";
  document.getElementById('centered').innerHTML="Well done!<br/>You did it in "+ totaltime + " seconds with "+clickcount+" clicks!";
   createBalloons(30);
  }
 }

}

function random(num) {
  return Math.floor(Math.random()*num)
}

function getRandomStyles() {
  var r = random(255);
  var g = random(255);
  var b = random(255);
  var mt = random(200);
  var ml = random(50);
  var dur = random(5)+5;
  return `
  background-color: rgba(${r},${g},${b},0.7);
  color: rgba(${r},${g},${b},0.7); 
  box-shadow: inset -7px -3px 10px rgba(${r-10},${g-10},${b-10},0.7);
  margin: ${mt}px 0 0 ${ml}px;
  animation: float ${dur}s ease-in normal
  `
}

function createBalloons(num) {
  var balloonContainer = document.getElementById("balloon-container")
  for (var i = num; i > 0; i--) {
  var balloon = document.createElement("div");
  balloon.className = "balloon";
  balloon.style.cssText = getRandomStyles(); 
  balloonContainer.append(balloon);
  }
}

/* Balloon animation adapted from: Copyright (c) 2022 by Jemima (https://codepen.io/Jemimaabu/pen/vYEYdOy)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.*/

</script>

</body>
</html>

